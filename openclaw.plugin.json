{
  "id": "hookify-enforcer",
  "name": "Hookify Hard Enforcer",
  "description": "Configurable hard tool sequence enforcement using before_tool_call",
  "version": "0.3.0",
  "configSchema": {
    "type": "object",
    "additionalProperties": false,
    "properties": {
      "enabled": {
        "type": "boolean",
        "default": true
      },
      "guardToolPattern": {
        "type": "string",
        "default": "opseq_guard\\\\.py"
      },
      "readMarkOp": {
        "type": "string",
        "default": "read-mark"
      },
      "mutateOps": {
        "type": "array",
        "items": {
          "type": "string"
        },
        "default": [
          "append",
          "insert-after"
        ]
      },
      "readTtlSec": {
        "type": "integer",
        "minimum": 1,
        "default": 1800
      },
      "cooldownSec": {
        "type": "integer",
        "minimum": 0,
        "default": 20
      },
      "blockedExecRegexes": {
        "type": "array",
        "items": {
          "type": "string"
        }
      },
      "allowExecRegexes": {
        "type": "array",
        "items": {
          "type": "string"
        }
      },
      "enforceAllExec": {
        "type": "boolean",
        "default": false
      },
      "execRequireRegexes": {
        "type": "array",
        "items": {
          "type": "string"
        }
      },
      "messageBlockRegexes": {
        "type": "array",
        "items": {
          "type": "string"
        }
      },
      "messageAllowRegexes": {
        "type": "array",
        "items": {
          "type": "string"
        }
      },
      "blockReasoningRegexes": {
        "type": "array",
        "items": {
          "type": "string"
        }
      },
      "requireVerificationForSpawn": {
        "type": "boolean",
        "default": false
      },
      "verificationStampPath": {
        "type": "string"
      },
      "verificationMaxAgeSec": {
        "type": "integer",
        "minimum": 1,
        "default": 3600
      },
      "strictMode": {
        "type": "boolean",
        "default": false
      },
      "strictAllowedExecRegexes": {
        "type": "array",
        "items": {
          "type": "string"
        },
        "default": [
          "^openclaw doctor\\b",
          "^openclaw plugins doctor\\b",
          "^openclaw hooks check\\b",
          "^scripts/verify-runtime\\.sh\\b"
        ]
      },
      "strictRequireDoctorOk": {
        "type": "boolean",
        "default": true
      },
      "strictRequirePluginsDoctorOk": {
        "type": "boolean",
        "default": true
      },
      "strictRequireHooksCheckOk": {
        "type": "boolean",
        "default": true
      },
      "requireTrustedVerificationForSpawn": {
        "type": "boolean",
        "default": true
      },
      "trustedVerificationKeys": {
        "type": "array",
        "items": {
          "type": "string"
        },
        "default": [
          "doctorOk",
          "pluginsDoctorOk",
          "hooksCheckOk"
        ]
      }
    }
  }
}
